
https://zhuanlan.zhihu.com/p/504074482

1. 嵌入式系统中经常要用到无限循环，如何用C编写死循环

	while(1){}或者for(;;)


2. 程序的局部变量存在于哪里，全局变量存在于哪里，动态申请数据存在于哪里

	程序的局部变量存在于栈区；全局变量存在于静态区；动态申请数据存在于堆区。


3. 关键字const有什么含义？

	1）只读
	
	2）使用关键字const也许能产生更紧凑的代码
	
	3）使编译器很自然地保护那些不希望被改变的参数，防止其被无意的代码修改。


4. 什么是预编译，何时需要预编译？

	１、总是使用不经常改动的大型代码体。
	
	２、程序由多个模块组成，所有模块都使用一组标准的包含文件和相同的编译选项。在这种情况下，可以将所有包含文件预编译为一个预编译头。
	
	预编译指令指示了在程序正式编译前就由编译器进行的操作，可以放在程序中的任何位置。


5. 局部变量能否和全局变量重名？

	能，局部会屏蔽全局。
	
	局部变量可以与全局变量同名，在函数内引用这个变量时，会用到同名的局部变量，而不会用到全局变量。
	
	对于有些编译器而言，在同一个函数内可以定义多个同名的局部变量，比如在两个循环体内都定义一个同名的局部变量，而那个局部变量的作用域就在那个循环体内。


6. 引用与指针有什么区别？
	
	1） 引用必须被初始化，指针不必。
	
	2） 引用初始化以后不能被改变，指针可以改变所指的对象。
	
	3） 不存在指向空值的引用，但是存在指向空值的指针。


7. 一个32位的机器,该机器的指针是多少位？

	指针是多少位只要看地址总线的位数就行了。80386以后的机子都是32的数据总线。所以指针的位数就是4个字节了


8. 请问以下代码有什么问题：

	```c
	int main()
	{
		char a;
		char *str=&a;
		strcpy(str,"hello");
		printf(str);
		
		return 0;
	}
	```

	没有为str分配内存空间，将会发生异常，问题出在将一个字符串复制进一个字符变量指针所指地址。虽然可以正确输出结果，但因为越界进行内在读写而导致程序崩溃。


9. 请在C语言中，关键字static有三个明显的作用：

	1）在函数体，一个被声明为静态的变量在这一函数被调用过程中维持其值不变。
	
	2）在模块内（但在函数体外），一个被声明为静态的变量可以被模块内所用函数访问，但不能被模块外其它函数访问。它是一个本地的全局变量。
	
	3）在模块内，一个被声明为静态的函数只可被这一模块内的其它函数调用。那就是，这个函数被限制在声明它的模块的本地范围内使用。


10. 请写一个"标准"宏MIN ，这个宏输入两个参数并返回较小的一个。
	```
	#define MIN(A,B) ((A) <= (B) ? (A) : (B))
	```


11. 用变量a给出下面的定义

	a) 一个整型数
	b) 一个指向整型数的指针
	c) 一个指向指针的的指针，它指向的指针是指向一个整型数
	d) 一个有10个整型数的数组
	e) 一个有10个指针的数组，该指针是指向一个整型数的

	a) int a;
	b) int \*a;
	c) int \*\*a;
	d) int a[10];
	e) int \*a[10];


12. 使用C语言中的#define来定义一个常量来表示一年有多少秒？
	```
	#define SECONDS_PER_YEAR (60*60*24*365)UL
	```
	
	一定要加括号，宏定义只是替换，不加括号会出错


13. 请问进程和线程有什么区别？

	进程：资源分配的最小单位
	线程：程序运行的最小单位
	
	进程有自己的地址空间，当一个进程建立，系统就会为它分配地址空间，而线程是共享进程的数据，使用相同的地址空间。
	
	一个进程中可包含多个线程，一个进程死掉不糊影响其他进程，一个线程死掉，整个进程都死了。
	
	线程之间的通信更加方便，同一进程下的线程共享全局变量，静态变量等，而进程通信需要以IPC方式进行。


14. 请判断以下代码是否存在问题。

	```
	char * s1="hello";
	char * s2="world";
	char * s3=strcat(s1,s2);
	```
	有问题，s1与s2都为常量指针，其内容不可修改，运行就会产生段错误。


15. 请问下面的代码有什么问题？

	```
	void test1()
	{
		char string[10];
		char* str1 = "0123456789";
		strcpy( string, str1 );
	}
	```

	字符串strl的末尾是以’\0 ’结尾的，所以他的长度是11，而string的长度不够


16. 请问预处理器标识#error的目的是什么？

	编译程序时，只要遇到 `#error`就会跳出一个编译错误。当程序比较大时，往往有些宏定义是在外部指定的（如makefile），或是在系统头文件中指定的，当你不太确定当前是否定义了 XXX 时，就可以改成如下这样进行编译：
	```
	#ifdef XXX
	#error "XXX has been defined"
	#else
	…
	#endif
	```
	这样,如果编译时出现错误,输出了XXX has been defined,表明宏XXX已经被定义了。


17. 请解释以下三个变量声明的含义。

	1）int const \*p;
	2）int \* const p;
	3）int const \*p const;

	int const \*p=const int \*p; const修饰的是指针 p,表示指针p的值不能改变，而p（即地址）是可以改变的；

	int \* const p; const修饰的是p（即地址）是常量，不可改变，但是\*p的值可以改变。

	int const \*p const ; 上面两种情况兼得，表示只读，其地址以及地址中的值都不可改变


18. 请简述OSI七层模型和TCP/IP模型的组成？

	应用层 应用层
	表示层
	会话层
	传输层 传输层
	网络层 网络层
	数据链路层
	物理层 链路层


19. 请简述TCP/IP镞包含哪些分段，每一层有哪些常用协议？

	应用层：http dns telnet ftp tftp
	传输层：tcp udp
	网络层：ip icmp arp rarp osfp isis bgp
	数据链路层：ethnet ethnet2 802.3 ppp fr x.25 hdlc	
	物理层：比特流


20. 请问TCP与UDP协议有什么区别？
	
	1、TCP面向连接（如打电话要先拨号建立连接）;UDP是无连接的，即发送数据之前不需要建立连接
	
	2、TCP提供可靠的服务。它通过校验和，丢包时的重传控制，序号标识，滑动窗口、确认应答，次序乱掉的分包进行顺序控制实现可靠传输。即通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达; UDP尽最大努力交付，即不保证可靠交付。
	
	3、UDP具有较好的实时性，工作效率比TCP高，适用于对高速传输和实时性有较高要求的通信或广播通信场景。
	
	4、每一条TCP连接只能是点到点的; UDP支持一对一，一对多，多对一和多对多的交互通信方式。
	
	5、 TCP对系统资源要求较多，UDP对系统资源要求较少。


21. 请写一下strcpy函数的代码？
	```c
	char * strcpy(char *dst,const char *src)
	{
		if((dst==NULL)||(src==NULL))
			return NULL;
		
		int *p = dst;
		while((*dst++ = *str++) != /0)
			return p;
	}
	```


22. 从在浏览器地址栏中输入`http://www.baidu.com`到看到百度首页，这个过程中间经历了什么？
	
	**按照时间顺序：**
	
	1、客户端浏览器获取用户在地址栏输入的域名。
	
	2、客户端浏览器将域名发送给DNS域名系统，请求解析。
	
	3、DNS解析域名得到相应的IP，返回给客户端浏览器。
	
	4、客户端浏览器根据IP向服务器发起TCP三次握手，建立TCP连接。
	
	5、客户端浏览器向服务器发送HTTP请求，请求百度首页。
	
	6、服务器通过HTTP响应向客户端浏览器返回百度首页文件。
	
	7、释放TCP连接。
	
	8、客户端浏览器解析HTML文件，根据文件内容获取CSS、JS等资源文件，将页面渲染展示给用户。


23. 从在浏览器地址栏中输入`http://www.baidu.com`到看到百度首页，都涉及到哪些网络协议？
	
	TCP/IP五层模型中网络层及以上用到的协议：
	
	1.应用层：HTTP、DNS、HTTPS
	
	2.传输层：TCP、UDP
	
	3.网络层：IP、ARP


24. 请问同步与异步有什么区别？
	
	同步(Sync)：所有的操作都做完，才返回给用户。这样用户在线等待的时间太长，给用户一种卡死了的感觉（比如系统迁移中，点击了迁移，界面就不动了，但是程序还在执行，卡死了的感觉）。
	
	这种情况下，用户不能关闭界面，如果关闭，那么迁移程序也会中断，用户体验不好。
	
	异步(Async)：将用户请求放入消息队列，并反馈给用户，比如系统迁移程序已经启动，提示你可以关闭浏览器了。然后程序再慢慢地写入数据库。但是用户没有卡死的感觉，用户体验较好。


25. 请问进程和线程有什么区别？
	
	（1）进程是资源分配的最小单位。
	
	（2）线程是程序执行的最小单位，也是处理器调度的基本单位，但进程不是，两者均可并发执行。
	
	（3）进程有自己的独立地址空间，每启动一个进程，系统就会为它分配地址空间，建立数据表来维护代码段、堆栈段和数据段，这种操作非常昂贵。而线程是共享进程中的数据，使用相同的地址空间，因此，CPU切换一个线程的花费远比进程小很多，同时创建一个线程的开销也比进程小很多。
	
	（4）线程之间的通信更方便，同一进程下的线程共享全局变量、静态变量等数据，而进程之间的通信需要以通信的方式（IPC)进行。不过如何处理好同步与互斥是编写多线程程序的难点。但是多进程程序更健壮，多线程程序只要有一个线程死掉，整个进程也跟着死掉了，而一个进程死掉并不会对另外一个进程造成影响，因为进程有自己独立的地址空间。
	
	（5）进程切换时，消耗的资源大，效率高。所以涉及到频繁的切换时，使用线程要好于进程。同样如果要求同时进行并且又要共享某些变量的并发操作，只能用线程不能用进程。
	
	（6）执行过程：每个独立的进程有一个程序运行的入口、顺序执行序列和程序入口。但是线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。


26. 请问进程和线程都有什么优缺点？
	
	线程执行开销小，但是不利于资源的管理和保护。线程适合在SMP机器（双CPU系统）上运行。
	
	进程执行开销大，但是能够很好的进行资源管理和保护，可以跨机器迁移。
	
	何时使用多进程，何时使用多线程？
	
	对资源的管理和保护要求高，不限制开销和效率时，使用多进程。
	
	要求效率高，频繁切换时，资源的保护管理要求不是很高时，使用多线程。


27. 线程是否具有相同的堆栈?

	真正的程序执行都是线程来完成的，程序启动的时候操作系统就帮你创建了一个主线程。
	
	每个线程有自己的堆栈。


28. C语言编译时动态链接和静态链接得区别是什么？
	
	动态库：
	
	1、链接时不复制，程序运行时由系统动态加载到内存，供程序调用，系统只加载一次，多个程序可以共用，节省内存。
	
	2、程序升级简单，因为app里面没有库的源代码，升级之后只要库的名字不变，函数名以及参数不变，只是实现做了优化，就能加载成功。
	
	3、加载速度比静态库慢
	
	4、发布程序需要提供依赖的动态库
	
	静态库：
	
	1、静态库被打包到程序中加载速度快
	
	2 、发布程序无需提供静态库，应为已经在app中，移植方便
	
	3 、 链接时完整的拷贝至可执行文件中，被多次使用就会有多次冗余拷贝
	
	4、 更新，部署，发布麻烦


29. 堆和栈的区别？
	
	1、申请方式不同：栈由系统自动分配，堆是由人为自行开辟（malloc,new）
	
	2、申请的大小不同：栈是从高地址像低地址分配的，分配空间较小，堆是由地址向高地分配的，空间较大
	
	3、申请效率不同：栈由系统分配，分配速度较快，堆一般较慢
	
	4、栈是连续的地址空间，堆不是连续的地址空间，很容易产生内存碎片，浪费内存。


30. 进程间通信的方式有哪些？
	
	1）无名管道( pipe )：管道是一种半双工的通信方式，数据只能单向流动，而且只能在具有亲缘关系的进程间使用。进程的亲缘关系通常是指父子进程关系。
	
	2）有名管道 (named pipe) ：有名管道也是半双工的通信方式，但是它允许无亲缘关系进程间的通信。
	
	3）消息队列( message queue ) ： 消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。
	
	4）信号量( semophore ) ： 信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程内不同线程之间的同步手段。
	
	5）信号 ( sinal ) ： 信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。
	
	6）共享内存( shared memory ) ： 共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问。共享内存是最快的 IPC 方式，它是针对其他进程间通信方式运行效率低而专门设计的。它往往与其他通信机制，如信号两，配合使用，来实现进程间的同步和通信。
	
	7）套接字( socket ) ：套解字也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同机器间的进程通信。


31. 请简述嵌入式系统的定义和发展的4个阶段？
	
	定义：以应用为中心，以计算机技术为基础，软硬件可裁剪，适应应用系统对功能、可靠性、成本、体积、功耗严格要求的专用计算机系统。
	
	嵌入式系统发展的4个阶段：无操作系统阶段、简单操作系统阶段、实时操作系统阶段、面向Internet阶段。


32. 请简述嵌入式系统的组成？

	硬件层、中间层、系统软件层和应用软件层


33. 如何引用一个已经定义过的全局变量？

	可以用引用头文件的方式，也可以用extern关键字。


34. 全局变量可不可以定义在可被多个.C文件包含的头文件中？为什么？

	可以，在不同的C文件中以static形式来声明同名全局变量。


35. 请问堆栈溢出一般是由什么原因导致的？

	没有回收垃圾资源


36. 请问队列和栈有什么区别？


37. 请问Internet采用哪种网络协议？该协议的主要层次结构？

	tcp/ip 应用层/传输层/网络层/数据链路层/物理层


38. 请问Internet物理地址和IP地址转换采用什么协议？

	ARP (Address Resolution Protocol)（地址解析协议）


39. 请问IP地址的编码分为哪俩部分？

	IP地址由两部分组成，网络号和主机号。不过是要和“子网掩码”按位与上之后才能区分哪些是网络位哪些是主机位。


40. 请写出下列代码的输出内容
	```
	#include<stdio.h>
	
	main()
	{
		int a,b,c,d;
		
		a=10;
		b=a++;
		c=++a;
		d=10*a++;
		
		printf("b，c，d：%d，%d，%d"，b，c，d）;
		
		return 0;
	}
	```

	b，c，d：10，12，120


41. 请问下面的代码有什么问题？

	```
	#include <stdio.h>
	#include <stdlib.h>
	
	void getmemory(char *p)
	{
		p=(char *) malloc(100);
		strcpy(p,"hello world");
	}
	
	int main( )
	{
		char *str=NULL;
		
		getmemory(str);
		
		printf("%s/n",str);
		
		free(str);
		return 0;
	}
	```

	程序崩溃，getmemory中的malloc 不能返回动态内存， free（）对str操作很危险


42. 请找出下面代码中的所以错误
	```
	#说明：以下代码是把一个字符串倒序，如“abcd”倒序后变为“dcba”
	#include"string.h"
	
	main()
	{
		char*src="hello,world";
		char* dest=NULL;
		int len=strlen(src);
		
		dest=(char*)malloc(len);
		
		char* d=dest;
		char* s=src[len];
		
		while(len--!=0)
			d++=s--;
		
		printf("%s",dest);
		return 0;
	}
	```


	```
	int main()
	{
		char* src = "hello,world";
		int len = strlen(src);
		
		char* dest = (char*)malloc(len+1);//要为\0分配一个空间
		char* d = dest;
		char* s = &src[len-1];//指向最后一个字符
		
		while( len-- != 0 )
			*d++=*s--;
		
		*d = 0;//尾部要加\0
		printf("%s\n",dest);
		free(dest);// 使用完，应当释放空间，以免造成内存汇泄露
		
		return 0;
	}
	```


43. 请用宏定义写出swap（x，y）函数。
    ```
    #define swap(x, y)\
        x = x + y;\
        y = x - y;\
        x = x - y;
    ```


44. 请简述嵌入式系统硬件层的组成？

    硬件层：嵌入式微处理器、存储器、通用设备接口和I/O接口。
    
    嵌入式核心模块＝微处理器＋电源电路＋时钟电路＋存储器
    
    Cache：位于主存和嵌入式微处理器内核之间，存放的是最近一段时间微处理器使用最多的程序代码和数据。它的主要目标是减小存储器给微处理器内核造成的存储器访问瓶颈，使处理速度更快。


45. 请解释名词：时钟周期、状态周期、机器周期和指令周期？

    时钟周期：也称为震荡周期，定义为时钟频率的倒数（时钟周期是单片机外接晶振的倒数，如12Mhz的晶振，它的时钟周期就是1/12us）,它是单片机中最基本的、最小的时间单位。
    
    状态周期：它是时钟周期的两倍
    
    机器周期：单片机的基本操作周期，在一个操作周期内，单片机完成一项基本操作，如取指令、存储器读写等。它由12个时钟周期（6个状态周期）组成。
    
    指令周期：他是指CPU执行一条指令所需要的时间。一般一个指令周期含有1~4个机器周期。




