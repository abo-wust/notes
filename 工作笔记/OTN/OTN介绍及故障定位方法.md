
## 1 OTN 帧结构简介

### 1.1 OTN 产生的背景

目前，随着通信行业的发展，对光网络的要求越来越高，要求光网络所承载的信息量也越来越大，承载的客户信号种类也各种各样，包括 SDH、ATM、以太网、IP 等多种信号都要求能在光网络中快速、高效、透明、可靠的传输。为此，国际电信联盟 ITU 制定光传送网 OTN 的相关标准，来指导 OTN 的发展。

光传送网 OTN 是下一代光网络的发展方向。OTN 设备主要完成的功能就是将客户信号封装在 OTN 的相应帧格式中，透明、高效的进行传输，同时，通过相应的 OTN 开销对信号的好坏进行检测。因此，理解好 OTN 开销对深入理解 OTN 设备有着重要意义。

ITU-T 在 G.709 标准中规定了 OTN 的帧格式和映射方式，在 G.798 标准中规定了设备的功能特性。因此，本手册主要以 G.709 和 G.798 为标准，结合我司 M820V2.5 设备和 ZXONE 8X00 设备，主要讲述我司设备 OTN 开销的实现以及检测。


### 1.2 OTN 的网络层次

光传送网 OTN 的一个主要特征就是网络的层次化。将光传送网划分为多个网络层次，每个层次之间彼此互为服务层与客户层。客户信号在不同层次之间进行传输，每一层次都有着自己的开销，用于检测本层次信号的好坏。

根据 ITU-T 的 G.709 规定，OTN 分为客户信号层、光通道净荷单元（OPU）、光通道数据单元（ODU）、光通道传送单元（OTU）、光通道层（OCH）、光复用段层（OMS）、光传输段层（OTS）。以上各层之间，前者是后者的客户层，后者是前者的服务层。下面是对各层的简单说明：

1. 客户信号层：该层主要指 OTN 网络所要承载的局方信号，主要包括：SDH、以太网、IP业务等。

2. 光通道净荷单元 OPU：该层主要是用来适配客户信号以便使其适合在光通道上传输，即：承载客户信号的“容器”。该层的开销主要用来指示客户信号映射到 OTN 信号的过程。

3. 光通道数据单元 ODU：该层是由 OPU 层和 ODU 层相关开销构成的，该层的开销可以支持对传输信号质量端到端的检测。

4. 光通道传送单元 OTU：该层是在光路上传输信息的基本单元结构，有 ODU 层和 OTU 层相关开销构成。

5. 光通道层 OCH：该层是具有特定波长和特殊帧格式的光信号，其中特殊帧格式即定义的 OTU 层。

6. 光复用段层 OMS：该层为经过合波处理的多波长光信号。

7. 光传输段层 OTS：该层是经过 OA 放大等处理后的光信号。

由于层次化是 OTN 网络的主要特点，因此，熟悉各层次结构对于理解 OTN 标准十分重要。下图是 OTN 各层次图，以我司设备为例，指出各层的具体位置。

![](images/Pasted%20image%2020230412142204.png)

![](images/Pasted%20image%2020230412142246.png)

M820V2.5 设备 OTN 各层次举例：

![](images/Pasted%20image%2020230412142803.png)

在这里需要指出的是 OTS 层、OMS 层和 OCH 层是纯粹的光信号，虽然 G.709 中定义了相关的开销，但是目前几乎所有的设备制造商都没有涉足。因此，我们重点关注的应该是 OPU 层、ODU 层以及 OTU 层的相关开销。

OTN 各层还有不同的速率级别，即通常采用 OPUk、ODUk、OTUk 的形式来表示 OTN 各层（k=0、1、2、3），ODU0 对应 1.25G 速率级别，可以用来封装 GE 信号；ODU1 对应 2.5G 速率级别，可以用来封装 STM-16 信号；ODU2 对应 10G 速率级别；ODU3 则对应 40G 速率级别。


### 1.3 OTN 的帧结构

OTN 的帧结构与 SDH 的帧结构不同，OTUk 的帧时由 4 行 4080 列的字节组成。每一个OTUk 帧都可以看成相应 ODUk 加成 OTU 的开销所构成，而每一个 ODUk 也同样可以看成是由相应的 OPUk 加上 ODU 的开销所构成。下图是一个 OTUk 帧的示意图：

![](images/Pasted%20image%2020230412142942.png)

上图所示中，紫色区域为 OTUk 帧的帧头区；红色区域为 OTU 层开销；蓝色区域为 ODU 层开销；绿色区域为 OPU 层开销；黄色区域为 OTUk 帧的净荷区。详细的开销示意图如下图所示：

![](images/Pasted%20image%2020230412143135.png)

下面分别对各区域开销做简单介绍。

1. 帧定位字节：
    
    G.709 中规定，每一个 OTUk 的帧头有 6 个帧定位字节（FAS）和一个复帧定位字节（MFAS）组成。帧定位开销既可用于 OTUk，也可用于 ODUk，当设备收到的 OTUk 帧或 ODUk 帧的帧定位字节出现错误时，设备上报 OTU 帧丢失（对于 ODU 帧则上报 ODU-LOFLOM）；如果出现复帧错误，则会上报 OTU 复帧丢失的告警。需要特别指出的是，无论是帧丢失，还是复帧丢失，都按业务失效处理。

2. OTUk 的开销：
    
    如下图所示，OTUk 的开销实际上有两部分组成，一部分是 7 个字节的开销，另一部分是最后附加的 FEC 纠错开销，这里重点介绍 OTUk 的 7 个字节开销。
    
    ![](images/Pasted%20image%2020230412143201.png)
    
    OTUk 的 7 字节开销主要由三部分组成：3 字节的段检视开销（SM）、2 字节的通用通信通道（GCC0）以及 2 字节的预留段（RES）。与我们业务密切相关的是 SM 段的开销。
    
    SM 段开销有 3 个字节组成，第一个字节


![](images/Pasted%20image%2020230412143235.png)


![](images/Pasted%20image%2020230412143314.png)


![](images/Pasted%20image%2020230412143331.png)


