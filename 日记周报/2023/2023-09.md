
## 09-01

### 工作内容

1. 梳理接口管理和聚合口的link处理逻辑，包括平台的事件通知流程和驱动的事件和快速通知逻辑。
    测试今天没有复现物理口up，显示down的现象，倒是有lacp模式下应该显示standby，但是显示active问题，这个是平台问题，没有跟踪。



## 09-04

### 工作内容

1. 聚合口状态问题，测试反馈没有复现，8月24号的版本出现该问题后，后续升级的多个版本都未能复现，对比了这期间的代码，没有看到相关改动。
2. 梳理link处理上报，以及接口管理震荡抑制的逻辑。
3. 验证6C48升级文件，整理升级指导文档。



## 09-05

### 工作内容

1. 梳理link处理上报逻辑，将详细的处理过程整理成书面文字说明，看代码不复杂，但是需要落成文字较为繁琐。
2. 给硬件确认721测试问题，vlan配置问题。



## 09-06

### 工作内容

1. 梳理link处理上报逻辑，包括向sdk注册的中断处理函数，88A设备的快速开销处理过程，ROS和驱动的接口震荡抑制功能等，将详细的处理过程整理输出文档（附件总结文档）。



## 09-07

### 工作内容



## 09-08

### 工作内容

1、梳理接口速率、双工模式，二三层模式以及管理状态等配置流程，借助驱动层的debug打印信息，命令行配置输出涉及到的函数调用。
模式切换时会有一些默认的配置下发，像l3if，IP地址以及其他根据接口类型的配置，这部分大概看了一下，涉及的功能有点多。



## 09-11

### 工作内容

1. 熟悉产品目录的Makefile编译文件，包括如何在产品型号目录下编译各个模块，平台头文件怎么通过make文件夹下的各个mk文件引入，不同变量的用法等。
2. FCG子卡硬件设计方案，理解板卡涉及到的软件功能。


## 09-12

### 工作内容



## 09-13

### 工作内容

1. 新增产品目录测试编译过程，参照88e设备的编译流程，修改makefile以及代码的一些宏隔离就行，但是FCG子卡要兼顾单盘的方式，这两个方式暂时没搞清楚怎么编译。



## 09-14

### 工作内容

1. 算力子卡需要单独作为网元没法不在不修改fdi和ssp代码下进行编译，还是要用宏做隔离，怎么在两种模式下进行管理需要后面讨论方案；
2. 看ProcessApi和hwapi事件通知的实现逻辑，实现代码有点多，大致上都是初始化根据任务创建socket并保存，在下发配置或者触发事件时查找该socket的fd进行收发。



## 09-15

### 工作内容

1. 看stg的驱动代码，之前梳理过，但是时间长了，有些地方需要再巩固一下；
2. 解决6C48的风扇产测问题，增加转速读取，比对档位转速是否在相应范围，目的是检查四个风扇的硬件连线是否正常，准确性不做要求，已编译验证并合入代码。



## 09-18

### 工作内容

1. 看stg的驱动代码，创建的拆分合并逻辑，有部分全局变量的使用可以修改，编译验证配置环网协议没有问题，但是改动没有功能上的优化，只是稍微容易阅读；
2. sdk dkits视图下的调试命令，补充常用命令的整理文档。



## 09-19

### 工作内容

1. 4C24丢包问题，6C48设备同样存在，时钟没有修改，只是将包长由128改为64字节，打25G满带宽丢包，入口缓存不够导致丢包，fae杨勇反馈可能是硬件时钟偏负导致，已沟通王杰让硬件再调一下时钟；
2. 整理sdk调试命令以及重新熟悉stg驱动代码。



## 09-20

### 工作内容

1. 熟悉框式设备的子卡启动流程；
2. 下午请假。



## 09-21

### 工作内容

1. 721C设备25G口丢包问题，64字节包长打流14秒左右开始丢包，65字节以及更长包长短时间未发现丢包，与fae杨勇沟通确认与时钟没有关系，没有找到具体原因，明天杨勇过来再看；
另外，10G口打满带宽流也有丢包问题，256包长也丢包，硬件王杰反馈之前测试未发现丢包，明天杨勇过来一起确认。
2. 梳理子卡启动，与主控间握手，主控注册子卡上线的逻辑，主控起一个任务轮询所有槽位，发送ibc消息，如果该槽位有ibc消息应答，则说明槽位有子卡上线，获取该槽位子卡信息，填到主控的数据结构；
最开始看子卡启动脚本是ros最后起，以为是ros触发了ibc消息，发给产品侧，然后由产品侧通知到主控，浪费较多时间来梳理ros的ibc收发处理逻辑，最后发现是主控轮询触发。



## 09-22

### 工作内容

1. 721C设备丢包问题，fae杨勇过来调试，接口配置access时64字节丢包问题没有确认原因，接口配置trunk时128字节在自环口rx也丢包，这个怀疑是自环口用的本地时钟，接仪表的口是从仪表提取的时钟，这个需要配置同步以太试试（硬件设备升级后验证）；换了另外2台6C48和1台4C24，接口同样配置vlan都没有出现丢包现象；
2. 熟悉盒式设备的phy初始化配置，FCG的phy芯片从设计文档上看主要是管理，需要配置的功能应该不太多。



## 09-25

### 工作内容

1. 721C设备丢包问题，王杰的设备升级到最新发布版本，配置同步以太网跟踪接仪表的端口，短时间无丢包，不配置或者配置另一个队列有阻塞的端口为时钟源时有丢包；测试环境反馈下午出现两次丢包，看的时候又没有复现；



## 09-26

### 工作内容

1. 721C设备丢包问题，配置同步以太网跟踪接仪表的端口，24小时无丢包，但是光纤自环接口的队列拥塞在增加，24小时增加到400出头，估计明天早上可以看到有丢包（队列门限496）；已反馈给硬件程鹏，定位具体的时钟原因。
2. 整理板卡上线处理过程的文档，主要是主控侧的逻辑；



## 09-27

### 工作内容

1. 721C设备丢包问题，配置同步以太网跟踪接仪表的端口，24小时无丢包，今天早上来看36小时按预期的出现丢包；修改接口队列的丢包门限可以保证一般测试的48小时无丢包要求，但是看PG文档是总共有38M缓存，增加到多少需要计算，还要找到驱动初始化门限的地方；
2. 整理板卡上线处理过程的文档，附件文档；



## 09-28

### 工作内容

1. 721C丢包问题，修改验证接口队列的默认丢包门限为1000，保证一般测试的48小时无丢包要求；跟fae王倩沟通定位，结论还是时钟问题，让硬件再量一下时钟，包括switch的core时钟l；
2. 721编译版本启动挂死，原因是ros平台用的master分支，驱动有改动电压，ros只合入了0612发布分支，导致编译版本异常；

