
## 07-03

### 工作内容

1. 熟悉8031的命令行配置，验证基本功能；
2. 结合驱动debug打印，熟悉驱动代码，fg通道涉及mtg接口，暂时跳过。

### 问题



## 07-04

### 工作内容

1. 熟悉g.8031协议，主要是aps涉及到的一些功能，包括基本的保护类型，倒换模式，以及不同保护类型下的工作过程，协议报文等；
2. 整理第一点中的学习文档。

### 问题



## 07-05

### 工作内容

1. 熟悉芯片手册上关于APS的实现，手册上介绍不多，主要是发送过程的tag怎么处理，1+1双发采用组播，而不是泛洪等，还有些细节在梳理；
2. 整理g.8031学习文档，对照rfc文档补充。

### 问题



## 07-06

### 工作内容

1. 整理g.8031学习文档，对照rfc文档补充aps协议报文和状态机部分，状态机部分有点多，大概看了一下，要完全清楚的话需要细看；
2. aps协议一些字段的使用目的，以及不同模式下的状态迁移基本了解，输出成文档时需要再理解清晰。

### 问题



## 07-07

### 工作内容

1. 熟悉驱动代码，stg和接口link状态部分，逻辑有点多，暂时没看太明白；
2. 完善g.8031和stg的学习总结文档。

### 问题



## 07-10

### 工作内容

1. 熟悉环路检测基本原理，基本命令行配置，部分命令行参数还不太清除具体作用；
2. 测试721设备灵活qinq的cvlan+cos匹配不生效问题，应该是版本不对，下发的配置tcam还是修改之前的mac类型，应该要ipv4和ipv6类型；

### 问题



## 07-11

### 工作内容

1. 熟悉环路检测驱动代码，平台的配置是分步下发的，驱动层看起来就是一条命令行有多个命令字类型，分别配置，这个不用深究，驱动层只管上cpu、成环后动作、stg分配以及端口状态配置这些；
2. 测试验证环路检测的基本功能，包括设备单一端口使能检测，以及设备两个端口使能检测，下挂网络成环的情况；单个设备两个端口成环没有验证；
3. 验证抓包时，环境搭建问题，仪表口不link，花时间找到的问题是机架跳线口问题，不能用绑好的成对光纤，只能用两根单纤；
4. 自测报告没有时间输出，明天整理；
5. 确认mac老化时间修改的芯片逻辑，手册没有详细说明，但是从效果看应该是老化时间立即生效，但是实际老化时间还是根据扫描周期在1-2倍之间。

### 问题



## 07-12

### 工作内容

1. 测试验证内环，即一台设备两个端口成环时的基本功能；
2. 输出环路检测功能的测试报告，下午仪表连不上，部分测试没有打流抓包，但是可以看到风暴形成和解除现象；
3. 721设备vlan无法配置，实际接口下大部分命令无法使用，原因时底层上报的接口注册错误；

### 问题



## 07-13

### 工作内容

1. 仪表恢复使用，补充环路检测验证，完善学习总结文档；
2. 熟悉8180手册示例的mac白名单配置，验证配置结果，该方案是设置目的mac的白名单，而且有配置的mac表项会老化的问题，不适用测试需求；
3. 熟悉命令行配置代码，平台现有的白名单命令行是vpls的，没有基于vlan的命令行。

### 问题



## 07-14

### 工作内容

1. 熟悉芯片手册ACL模块，没有深入，目的是了解基本的处理逻辑；
2. 使用sdk命令配置ACL表项，匹配mac+vlan验证丢弃和转发动作，这个要熟悉sdk命令各个参数含义，还不是太熟悉；
3. 编写测试代码，使用驱动的ACL配置接口，下发匹配源mac+vlan的规则，实现mac白名单功能，下发两条ACL，一条匹配白名单的mac允许转发，优先级设置较高，另一条设置优先级最低，不匹配任何信息，设置丢弃动作，编译版本验证可以实现白名单效果。
4. 研究scl的实现方案，暂时没有配置出白名单效果。

### 问题



## 07-17

### 工作内容

1. 熟悉芯片手册上 scl 相关介绍，主要内容是vlan编辑部分中 scl 的作用，相比开始熟悉qinq模块时对scl更清楚一点；
2. 仪表无法使用，熟悉 scl 配置的 sdk 接口以及代码，查找怎么配置出白名单功能；
3. 从芯片命令行配置开始跟表项的配置过程，熟悉 scl 的一些常用变量的配置，比如key_type，field_action等，目的是内容太多，收获不大，对白名单实现帮助不大；

### 问题



## 07-18

### 工作内容

1. 熟悉 acl 的sdk命令行配置，配置白名单功能，设备初始化有group配置，所以主要是配置entry表项，还有查看相关acl表项信息；
2. 硬件反馈721-C设备10G口少量丢包问题，思博伦仪表不可用，换用5800仪表打流未发现问题，晚上挂长期明天看是否有异常包；
3. 新员工培训考核，以及月度工作总结汇报；

### 问题



## 07-19

### 工作内容

1. 输出acl命令行配置白名单的文档总结，验证丢弃、上送cpu动作，查看是否上送cpu等；
2. scl配置在不修改接口初始化配置的key_type时，配置的匹配规则不生效，没有配置出白名单效果，应该还是配置不对；
3. 10G接口丢包的问题，昨天晚上打满带宽挂长期出现丢2个包，定位是串联的接口收包有fcs错包，排除软件原因，已反馈给硬件。

### 问题



## 07-20

### 工作内容

1. 721设备高温箱温度60上电后，10g和25g接口都出现业务不通，10g串联24个口，在第14口收包正常，期望从13口转发出去时，13口没有发包，定位是在MetFifo出现问题，测试时间不够继续定位，下次复现再按fae提供的定位方法定位；
2. 721设备常温环境上电10g口出现业务不通，接仪表口的两个10g口收包全部fcs，fae协助定位读取接口对应的McMacMiiRxDebugStats寄存器，发现接口对应的表项置0，怀疑是芯片版本问题，盒式设备1.1，该问题在1.3上有补丁，后续等更新patch再验证。

### 问题



## 07-21

### 工作内容

1. 721设备挂长期收包出现2个fcs，而且与前两次一样都是同一个端口，都是收包出现2个fcs，不好定位，让硬件换了这个口的光模块和光纤再复现；
2. 熟悉芯片命令行，主要是针对处理流程中不同模块的调试方法，比如trace定位，检查寄存器表项，dkits查看丢包原因等。

### 问题



## 07-24

### 工作内容

1. 复现反复上电不通时，硬件上电有配置恢复失败，提示命令不存在问题，应该是版本问题，升级到与刘攀相同版本后正常；
2. 6C48试产测试脚本，10G仪表口测试所有端口收发一致，脚本配置空一个100G口，自环一个；
3. 接口加入两个vlan，配置1：1转换后，删除转换后的vlan，再将接口加入该vlan时业务不通，原因是再次加入vlan时没有加入vlan所在的组播组，删除vlan转换再次加入正常，与ssp层的代码无关，应该是sdk的问题，暂时未定位到具体原因。


### 问题



## 07-25

### 工作内容

1. 定位接口加入vlan，配置1：1转换后，删除转换后的vlan，再将接口加入该vlan时业务不通问题，原因是ssp层逻辑在接口加入vlan时触发了N:1转换注册的回调函数，导致接口从vlan的默认表项中删除，使用sdk命令配置接口加入vlan也不行，这个应该是sdk的逻辑，不是问题。
2. 修改1中问题，区分1:1和n:1转换，避免配置1:1转换后配置vlan时触发n:1注册的回调；
3. 配合硬件复现业务不通问题；

### 问题



## 07-26

### 工作内容

1. 修改版本验证接口加入vlan，配置1：1转换后，删除转换后的vlan，再将接口加入该vlan时业务不通问题；
2. 熟悉接口不同vlan配置打不同的报文时，各个模块的匹配项，对照手册理解pkt-trace各匹配表项的意思；
3. 配合硬件复现业务不通问题；

### 问题



## 07-27

### 工作内容

1. 25G接口speed点灯问题，更新自适应版本后speed点灯正常；
2. 上电软件加载过程中风扇和电源点灯问题，还未定位到具体原因，没有发现点灯异常时有调用到cpld写寄存器的函数，可能是其他地方调用；
3. 硬件王杰那复现启动业务不通，今天反馈脚本反复启动有两次业务不通，但是没法保存环境，还是继续手动复现；

### 问题



## 07-28

### 工作内容

1. 上电软件加载过程中风扇和电源点灯问题，是点sys灯时寄存器地址错误，已修改；
2. 定位硬件王杰那复现的业务不通问题，与上次刘攀的环境出现的问题原因不同，今天的原因是接口mac rx packet disable，重新port-en enable后恢复正常，与88A一样的问题，编译杨勇改的sdk日志版本给硬件复现。

### 问题



## 07-31

### 工作内容

1. 修改版本，规避721设备上电后有概率接口mac rx packet disable问题，与88A处理方式类似，周期性检测状态，不对时重新使能接口；

### 问题


