
这个月的工作内容主要有 4 点：
1、一个是熟悉vlan的命令行配置，像vlan创建、删除，接口在access和trunk模式下添加和删除vlan，还有像tag和untag vlan的命令行配置这些，对基本功能做了一些测试验证，输出基本功能的测试报告。

然后是熟悉ssp的vlan相关的代码，主要是代码的初始化过程，还有就是看命令行下发的一些debug打印信息，熟悉代码的配置流程和逻辑，了解命令行配置对应使用的接口函数。


2、第二是熟悉设备的qinq功能，包括基本qinq和灵活qinq的命令行配置，梳理了各个命令行实现的具体功能，比方匹配单层vlan加一层vlan，变成双层vlan转发，这种用不同的命令行都可以实现。所以先是熟悉了一下各个命令行实现的具体效果。

了解了各个命令行的配置效果后，对qinq的这些命令行配置做了一些测试验证，输出基本功能的测试文档。

然后是熟悉qinq的相关代码，也是先打开qinq模块的debug开关，对着命令行的一些配置打印，熟悉代码的配置流程和基本逻辑。熟悉代码这块，一方面是命令行用到的函数接口有点多，所以梳理了一下命令行配置用到的函数接口；另一方面就是熟悉qinq规则的具体实现方案，有的配置是用芯片的vlan_mapping接口，直接查hash表实现，有些像匹配vlan+优先级，或者是匹配untag报文的命令，用的是下发scl的tcam表项，所以熟悉和梳理这一块用的时间多一点。


3、第三个涉及到的工作就是熟悉芯片手册，开始是大概看了一下二层转发的逻辑，后面是在看代码，还有定位qinq问题过程中学习的手册。

然后就是看芯片的开发指南手册，用sdk的一些命令验证vlan和qinq的功能，当中qinq的配置稍微复杂一点，也是边看手册边配置验证。


4、最后就是定位解决qinq命令不生效的问题，测出问题的时候彭雪莲提示了一下可能是哪里的问题，但是那个时候还不太熟悉ssp的代码，对qinq的芯片实现方案也不是很清楚，所以后面定位这个问题是一边看代码，一边看手册，用sdk命令验证，再就是一些sdk的调试命令定位解决的。

还有就是彭雪莲忙的时候，帮忙给测试看了一些测试问题。

上面就是这个月做的一些工作，对vlan和qinq的功能基本熟悉了，但是中间还是有些问题

1、比如qinq的基本功能验证，这个有些地方可能没有测试验证到，验证的时候都是单条命令配置然后打流验证正向反向，没有验证多条qinq命令配置的情况，这个后面有时间需要再看一下
2、第二个就是驱动代码的一些细节还是要多熟悉，像改qinq不生效的这个问题，就是因为细节没有考虑到，改的不完整，后面是彭雪莲指出来的


然后下个月的工作，就是熟悉mac、端口备份和8032环网协议这些。
