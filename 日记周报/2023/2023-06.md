

## 06-01

### 工作内容

1. 熟悉mac代码；
2. 端口安全配置，熟悉功能，测试验证结果。除了配置指定mac，学习限制范围内下发mac表，以及删除动作外，其他的比如设置上限，是否上报告警，超限后的动作等大都是平台实现的功能；
3. 给测试看qinq不生效问题。

### 问题

1. 不生效问题

    `switchport qinq default-cvlan 100`
    
    上面这条命令需要与双向的灵活qinq一起配置：
    
    `switchport vlan-mapping both inner 100 add-outer 200`

    达到的效果是：入接口如果是tag 100的，那就直接加200，如果入接口报文是untag的，也能转换成（200，100）的双层报文



## 06-02

### 工作内容

### 问题



## 06-05

### 工作内容

1. 对照测试用例熟悉端口备份的基本功能；
2. 熟悉端口备份的命令行配置，大概了解ssp的配置逻辑。（下发block和forward状态的核心逻辑stg还没看）

### 问题

1. 刚开始看备份功能，还没搭环境测试功能效果。



## 06-06

### 工作内容

1. 找环境测试验证端口备份的基本功能，基于bfd和cfm检查链路状态，这部分需要配置bfd和cfm，暂时没有验证；
2. 熟悉端口备份的驱动相关代码，涉及到的stg模块逻辑复杂一点，后面熟悉8032时再从头梳理一下。

### 问题

1. 部分配置还需要熟悉，比如验证端口备份时，switchport trunk 命令将接口添加到vlan中，但是没有创建vlan，使得接口加入vlan的命令并没有下发到芯片。



## 06-07

### 工作内容

学习文档：

1. 熟悉 ERPS 原理，包括基本概念：端口角色和状态、控制和数据vlan、各个定时器作用、回切模式和协议报文等；
2. 学习单环组网环境下的链路故障、恢复和保护倒换过程；
     不同状态下的协议报文类型（SF，NR，NRRB等）收发处理，刷新FDB表等动作；
     熟悉了单环多实例，但是，详细的协议报文处理、各节点除了更新接口状态刷新mac表外，其他的动作还不太清楚。

### 问题

1. 详细的协议报文处理、各节点除了更新接口状态刷新mac表外，其他的动作还不太清楚



## 06-08

### 工作内容

1. 熟悉 g.8032的RFC文档，主要是对照标准协议理解基本概念，昨天找的资料说明有些比较模糊；
2. 学习多环组网环境下的链路故障、恢复和保护倒换过程；
    熟悉WTR、Guard、Holdoff和WTB定时器的工作过程。

### 问题

1. 倒换和恢复过程中整个环网处于什么状态，还需要理解。



## 06-09

### 工作内容

1. 熟悉 g.8032的RFC文档；
2. 熟悉保护环创建命令的代码流程，这个大概看了一下过程，中间涉及到的全局变量较多，各个变量的使用还需要梳理；
3. 熟悉设备命令行配置；

### 问题

1. 两台设备组网配置，两端配置保护环实例，shutdown接口看状态变化，两端状态正常倒换，回切过程两端不一致，暂时没找到原因。



## 06-12

### 工作内容

1. 熟悉设备erps命令行配置，抓包协议报文；
2. 但是不配native时，88-E也能恢复idle；

### 问题

1. 两台设备组网配置，两端配置保护环实例，一端设备一直处于pending状态，配置接口native vlan后正常。
2. 反复删除重配erps和接口vlan，会出现两端都pending，需要clear命令恢复。



## 06-13

### 工作内容

1、熟悉erps驱动代码，结合debug打印熟悉配置逻辑；

### 问题

1. shutdown普通接口，RPL链路正常倒换，普通接口up后，普通接口几秒后就重新forward，等待wtr超时后，RPL链路重新block，几秒就恢复转发，应该是平台逻辑问题。


## 06-14

### 工作内容

1. 熟悉驱动stg模块代码，主要是vlanlist映射到不同stg时的拆分合并逻辑，以及映射过程中端口状态的设置等；
2. 熟悉模块涉及到的部分全局变量，比如vlan对应的stg号，stg的使用记录，各stg下的端口状态等，其他的全局变量还需要熟悉理解。

### 问题



## 06-15

### 工作内容

1. 熟悉驱动stg模块代码；
2. 输出文档：stg模块代码逻辑，今天主要是整理接口函数到sdk接口的配置过程，以及涉及到的各个全局变量使用逻辑。

### 问题



## 06-16

### 工作内容

1. 熟悉驱动stg模块代码；
2. 梳理stg的拆分合并逻辑，一些细节部分看起来没有问题，但是这么设计的原因需要理解。

### 问题



## 06-19

### 工作内容

1. 梳理 ERPS 代码，结合标准协议整理总结文档（故障、强制倒换以及恢复的状态迁移）；协议的一些处理需要考虑怎么理解并陈述清楚。

### 问题



## 06-20

### 工作内容

1. 整理驱动代码stg部分配置逻辑，sdk相关命令等；
2. 配置两条vlan有重叠的环网，删除时好像有点问题，有接口状态没有恢复到forwarding。

### 问题



## 06-21

### 工作内容

### 问题



## 06-25

### 工作内容

1. 熟悉stg驱动代码，定位删除环网配置时接口在删除后的stg中状态仍为block问题；
2. 添加调试打印，编译升级版本验证上述问题，结论是不影响功能，再次分配该stg时平台会设置对应的状态，驱动层可以不重置为forward。

### 问题



## 06-26

### 工作内容

1. 补充整理erps学习总结文档，准备学习的交流分享。

### 问题



## 06-27

### 工作内容

1. 熟悉g.8031功能基本原理，这个比较简单，但是aps协议的状态机暂时没了解，后面上网了下个rfc文档再看；
2. 熟悉部分8031的驱动代码。

### 问题



## 06-28

### 工作内容

1. 梳理trunk口的erps倒换处理，主要是trunk口up/down的判断条件；
2. 梳理cc检测故障触发erps的逻辑，还是ssp的cfm模块检测上报平台的erps，然后由平台下发到ssp的erps驱动处理；
3. 熟悉代码里用的时间戳接口，包括平台和ssp各自的接口，需要查看时要先debug打开记录开关，再进行配置或者其他的命令，然后才能使用show命令查看代码里面打的时间戳信息。

### 问题



## 06-29

### 工作内容

1. 完成月度总结文档；
2. 熟悉g.8031驱动代码，配置删除的基本逻辑，底层逻辑是设置端口在stg的状态。

### 问题



## 06-30

### 工作内容

### 问题




